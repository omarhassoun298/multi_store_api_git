{{ header }}{{ column_left }}
<div id="content">
  <div class="page-header">
    <div class="container-fluid">
      
      <h1>{{ heading_title }}</h1>
      
      <ul class="breadcrumb">
        {% for breadcrumb in breadcrumbs %}
        <li class="breadcrumb-item"><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a></li>
        {% endfor %}
      </ul>
      
    </div>
    
  </div>

  <div class="container-fluid">
    {% if error_warning %}
    <div class="alert alert-danger alert-dismissible fade show">
      <i class="fa fa-exclamation-circle"></i> {{ error_warning }}
      <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
    {% endif %}
    {% if success %}
    <div class="alert alert-success alert-dismissible fade show">
      <i class="fa fa-check-circle"></i> {{ success }}
      <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
    {% endif %}

    <div class="card">
      <div class="card-header d-flex justify-content-between align-items-center">
    <div class="d-flex align-items-center">
        <i class="fa fa-list me-2"></i>
        <span>{{ text_list }}</span>
    </div>
    <div class="d-flex align-items-center">
        <div class="col-md-8 me-2">
            <div class="mb-0">
                <input type="text" 
                       name="filter_name" 
                       value="{{ filter_name }}" 
                       placeholder="Enter Name" 
                       id="input-name" 
                       data-oc-target="autocomplete-name" 
                       autocomplete="off" 
                       class="form-control">
                <input type="hidden" name="filter_name_id" value="">
                <ul id="autocomplete-name" class="dropdown-menu"></ul>
            </div>
        </div>
        <button type="button"
                data-bs-toggle="tooltip"
                title="Clear Name Input"
                id="button-clear"
                class="btn btn-warning me-2">
            <i class="fa fa-stop"></i>
        </button>
    </div>
</div>

      
      <div class="card-body">
        <form action="{{ delete }}" method="post" enctype="multipart/form-data" id="form-onboarding">
          <div class="table-responsive"  style="overflow-y: auto;">
            <table class="table table-bordered table-hover">
              <thead>
                <tr>
                  <!-- <th style="width: 1px;" class="text-center">
                    <input type="checkbox" class="form-check-input" onclick="$('input[name*=\'selected\']').prop('checked', this.checked);" />
                  </th> -->
                  <th class="text-start">
                    {% if sort == 'name' %}
                    <a href="{{ sort_name }}" class="{{ order|lower }}">{{ column_name }}</a>
                    {% else %}
                    <a href="{{ sort_name }}">{{ column_name }}</a>
                    {% endif %}
                  </th>
                  <th >Email</th>
                  <th>Telephone</th>
                  <th>Topic</th>
                  <th>Help</th>
                  <th>Help Details</th>
                </tr>
              </thead>
              <tbody id="table">
                {% if onboarding %}
                {% for onboarding in onboarding %}
                <tr>
                  <!-- <td class="text-center">
                    {% if onboarding.onboarding_id in selected %}
                    <input type="checkbox" class="form-check-input" name="selected[]" value="{{ onboarding.onboarding_id }}" checked="checked" />
                    {% else %}
                    <input type="checkbox" class="form-check-input" name="selected[]" value="{{ onboarding.onboarding_id }}" />
                    {% endif %}
                  </td> -->
                  <td class="text-start">{{ onboarding.name }}</td>
                   <td class="text-start">{{ onboarding.email }}</td>
                   <td class="text-start">{{ onboarding.telephone }}</td>
                   <td class="text-start">{{ onboarding.topic }}</td>
                   <td class="text-start">{{ onboarding.help }}</td>
                  <td class="text-start">{{ onboarding.help_details }}</td>
                  
                </tr>
                {% endfor %}
                {% else %}
                <tr>
                  <td class="text-center" colspan="4">{{ text_no_results }}</td>
                </tr>
                {% endif %}
              </tbody>
            </table>
          </div>
        </form>
        <div class="row" id="pagination">
          <div class="col-sm-6 text-start">{{ pagination }}</div>
          <div class="col-sm-6 text-end">{{ results }}</div>
        </div>
      </div>
    </div>
  </div>
</div>
{{ footer }}
<script>
$('#button-clear').on('click',function(){
    location = 'index.php?route=onboarding_form/onboarding_form&user_token={{ user_token }}';
})

$('input[name=\'filter_name\']').autocomplete({
    'source': function(request, response) {
        $.ajax({
            url: 'index.php?route=onboarding_form/onboarding_form/autocomplete&user_token={{ user_token }}&filter_name=' + encodeURIComponent(request),
            dataType: 'json',
            success: function(json) {
                response($.map(json, function(item) {
                    return {
                        label: item['name'],
                        value: item['onboarding_form_id'],
                        email: item['email'],
                        telephone: item['telephone'],
                        topic: item['topic'],
                        help: item['help'],
                        help_details: item['help_details']
                    };
                }));
            }
        });
    },
    'select': function(item) {
        // Update input fields
        $('input[name=\'filter_name\']').val(item['label']);
        $('input[name=\'filter_name_id\']').val(item['value']);

        $('#pagination').hide();
        $('#table').empty();

        // Append new row
        $('#table').append(`
            <tr>
                <td class="text-start">${item.label}</td>
                <td class="text-start">${item.email}</td>
                <td class="text-start">${item.telephone}</td>
                <td class="text-start">${item.topic}</td>
                <td class="text-start">${item.help}</td>
                <td class="text-start">${item.help_details}</td>
            </tr>
        `);
    }
});
</script>

